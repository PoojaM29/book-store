function cov_yhcw37bd3(){var path="C:\\Pooja\\Order Booking\\Backend\\controllers\\comment.js";var hash="f24209fe4e0d54f0e9b78335a81c5d16e274bca9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Pooja\\Order Booking\\Backend\\controllers\\comment.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:52}},"1":{start:{line:2,column:13},end:{line:2,column:46}},"2":{start:{line:3,column:13},end:{line:3,column:46}},"3":{start:{line:5,column:19},end:{line:5,column:20}},"4":{start:{line:8,column:17},end:{line:8,column:19}},"5":{start:{line:9,column:22},end:{line:9,column:26}},"6":{start:{line:11,column:4},end:{line:14,column:5}},"7":{start:{line:12,column:8},end:{line:12,column:28}},"8":{start:{line:13,column:8},end:{line:13,column:69}},"9":{start:{line:16,column:4},end:{line:19,column:6}},"10":{start:{line:22,column:0},end:{line:217,column:2}},"11":{start:{line:24,column:21},end:{line:24,column:38}},"12":{start:{line:25,column:24},end:{line:27,column:15}},"13":{start:{line:29,column:8},end:{line:46,column:15}},"14":{start:{line:36,column:16},end:{line:39,column:19}},"15":{start:{line:42,column:16},end:{line:42,column:33}},"16":{start:{line:43,column:16},end:{line:45,column:19}},"17":{start:{line:50,column:21},end:{line:50,column:38}},"18":{start:{line:52,column:8},end:{line:68,column:15}},"19":{start:{line:58,column:16},end:{line:61,column:19}},"20":{start:{line:64,column:16},end:{line:64,column:33}},"21":{start:{line:65,column:16},end:{line:67,column:19}},"22":{start:{line:72,column:21},end:{line:72,column:38}},"23":{start:{line:73,column:21},end:{line:73,column:32}},"24":{start:{line:74,column:22},end:{line:74,column:38}},"25":{start:{line:76,column:31},end:{line:76,column:60}},"26":{start:{line:78,column:8},end:{line:83,column:9}},"27":{start:{line:79,column:12},end:{line:82,column:15}},"28":{start:{line:85,column:8},end:{line:125,column:11}},"29":{start:{line:86,column:12},end:{line:90,column:13}},"30":{start:{line:87,column:16},end:{line:89,column:19}},"31":{start:{line:92,column:12},end:{line:124,column:15}},"32":{start:{line:93,column:16},end:{line:97,column:17}},"33":{start:{line:94,column:20},end:{line:96,column:23}},"34":{start:{line:99,column:16},end:{line:123,column:19}},"35":{start:{line:100,column:20},end:{line:100,column:55}},"36":{start:{line:101,column:20},end:{line:101,column:47}},"37":{start:{line:102,column:20},end:{line:102,column:45}},"38":{start:{line:103,column:20},end:{line:103,column:44}},"39":{start:{line:105,column:20},end:{line:105,column:32}},"40":{start:{line:106,column:20},end:{line:106,column:32}},"41":{start:{line:107,column:20},end:{line:117,column:23}},"42":{start:{line:108,column:24},end:{line:116,column:31}},"43":{start:{line:112,column:32},end:{line:115,column:35}},"44":{start:{line:119,column:20},end:{line:119,column:37}},"45":{start:{line:120,column:20},end:{line:122,column:23}},"46":{start:{line:129,column:24},end:{line:129,column:44}},"47":{start:{line:130,column:21},end:{line:130,column:32}},"48":{start:{line:131,column:28},end:{line:131,column:44}},"49":{start:{line:133,column:31},end:{line:133,column:60}},"50":{start:{line:135,column:8},end:{line:140,column:9}},"51":{start:{line:136,column:12},end:{line:139,column:15}},"52":{start:{line:142,column:8},end:{line:179,column:11}},"53":{start:{line:143,column:12},end:{line:147,column:13}},"54":{start:{line:144,column:16},end:{line:146,column:19}},"55":{start:{line:149,column:12},end:{line:178,column:19}},"56":{start:{line:153,column:20},end:{line:157,column:21}},"57":{start:{line:154,column:24},end:{line:156,column:27}},"58":{start:{line:159,column:20},end:{line:163,column:21}},"59":{start:{line:160,column:24},end:{line:162,column:27}},"60":{start:{line:165,column:20},end:{line:165,column:52}},"61":{start:{line:166,column:20},end:{line:166,column:35}},"62":{start:{line:168,column:20},end:{line:171,column:23}},"63":{start:{line:174,column:20},end:{line:174,column:37}},"64":{start:{line:175,column:20},end:{line:177,column:23}},"65":{start:{line:183,column:24},end:{line:183,column:44}},"66":{start:{line:184,column:21},end:{line:184,column:32}},"67":{start:{line:186,column:8},end:{line:215,column:11}},"68":{start:{line:187,column:12},end:{line:191,column:13}},"69":{start:{line:188,column:16},end:{line:190,column:19}},"70":{start:{line:193,column:12},end:{line:197,column:13}},"71":{start:{line:194,column:16},end:{line:196,column:19}},"72":{start:{line:199,column:12},end:{line:209,column:15}},"73":{start:{line:200,column:16},end:{line:208,column:19}},"74":{start:{line:201,column:20},end:{line:207,column:23}},"75":{start:{line:202,column:24},end:{line:202,column:48}},"76":{start:{line:203,column:24},end:{line:203,column:36}},"77":{start:{line:204,column:24},end:{line:206,column:27}},"78":{start:{line:211,column:12},end:{line:211,column:29}},"79":{start:{line:212,column:12},end:{line:214,column:15}}},fnMap:{"0":{name:"validateCommentForm",decl:{start:{line:7,column:9},end:{line:7,column:28}},loc:{start:{line:7,column:38},end:{line:20,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:17},end:{line:23,column:18}},loc:{start:{line:23,column:31},end:{line:47,column:5}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:35,column:18},end:{line:35,column:19}},loc:{start:{line:35,column:32},end:{line:40,column:13}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:41,column:19},end:{line:41,column:20}},loc:{start:{line:41,column:28},end:{line:46,column:13}},line:41},"4":{name:"(anonymous_4)",decl:{start:{line:49,column:25},end:{line:49,column:26}},loc:{start:{line:49,column:39},end:{line:69,column:5}},line:49},"5":{name:"(anonymous_5)",decl:{start:{line:57,column:18},end:{line:57,column:19}},loc:{start:{line:57,column:32},end:{line:62,column:13}},line:57},"6":{name:"(anonymous_6)",decl:{start:{line:63,column:19},end:{line:63,column:20}},loc:{start:{line:63,column:28},end:{line:68,column:13}},line:63},"7":{name:"(anonymous_7)",decl:{start:{line:71,column:9},end:{line:71,column:10}},loc:{start:{line:71,column:23},end:{line:126,column:5}},line:71},"8":{name:"(anonymous_8)",decl:{start:{line:85,column:35},end:{line:85,column:36}},loc:{start:{line:85,column:45},end:{line:125,column:9}},line:85},"9":{name:"(anonymous_9)",decl:{start:{line:92,column:39},end:{line:92,column:40}},loc:{start:{line:92,column:49},end:{line:124,column:13}},line:92},"10":{name:"(anonymous_10)",decl:{start:{line:99,column:58},end:{line:99,column:59}},loc:{start:{line:99,column:74},end:{line:118,column:17}},line:99},"11":{name:"(anonymous_11)",decl:{start:{line:107,column:43},end:{line:107,column:44}},loc:{start:{line:107,column:49},end:{line:117,column:21}},line:107},"12":{name:"(anonymous_12)",decl:{start:{line:111,column:34},end:{line:111,column:35}},loc:{start:{line:111,column:47},end:{line:116,column:29}},line:111},"13":{name:"(anonymous_13)",decl:{start:{line:118,column:25},end:{line:118,column:26}},loc:{start:{line:118,column:34},end:{line:123,column:17}},line:118},"14":{name:"(anonymous_14)",decl:{start:{line:128,column:10},end:{line:128,column:11}},loc:{start:{line:128,column:24},end:{line:180,column:5}},line:128},"15":{name:"(anonymous_15)",decl:{start:{line:142,column:35},end:{line:142,column:36}},loc:{start:{line:142,column:45},end:{line:179,column:9}},line:142},"16":{name:"(anonymous_16)",decl:{start:{line:152,column:22},end:{line:152,column:23}},loc:{start:{line:152,column:35},end:{line:172,column:17}},line:152},"17":{name:"(anonymous_17)",decl:{start:{line:173,column:23},end:{line:173,column:24}},loc:{start:{line:173,column:32},end:{line:178,column:17}},line:173},"18":{name:"(anonymous_18)",decl:{start:{line:182,column:12},end:{line:182,column:13}},loc:{start:{line:182,column:26},end:{line:216,column:5}},line:182},"19":{name:"(anonymous_19)",decl:{start:{line:186,column:41},end:{line:186,column:42}},loc:{start:{line:186,column:54},end:{line:210,column:9}},line:186},"20":{name:"(anonymous_20)",decl:{start:{line:199,column:56},end:{line:199,column:57}},loc:{start:{line:199,column:62},end:{line:209,column:13}},line:199},"21":{name:"(anonymous_21)",decl:{start:{line:200,column:94},end:{line:200,column:95}},loc:{start:{line:200,column:100},end:{line:208,column:17}},line:200},"22":{name:"(anonymous_22)",decl:{start:{line:201,column:52},end:{line:201,column:53}},loc:{start:{line:201,column:62},end:{line:207,column:21}},line:201},"23":{name:"(anonymous_23)",decl:{start:{line:210,column:17},end:{line:210,column:18}},loc:{start:{line:210,column:26},end:{line:215,column:9}},line:210}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:14,column:5}},{start:{line:11,column:4},end:{line:14,column:5}}],line:11},"1":{loc:{start:{line:11,column:8},end:{line:11,column:92}},type:"binary-expr",locations:[{start:{line:11,column:8},end:{line:11,column:16}},{start:{line:11,column:20},end:{line:11,column:55}},{start:{line:11,column:59},end:{line:11,column:92}}],line:11},"2":{loc:{start:{line:25,column:24},end:{line:27,column:15}},type:"cond-expr",locations:[{start:{line:26,column:14},end:{line:26,column:42}},{start:{line:27,column:14},end:{line:27,column:15}}],line:25},"3":{loc:{start:{line:78,column:8},end:{line:83,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:83,column:9}},{start:{line:78,column:8},end:{line:83,column:9}}],line:78},"4":{loc:{start:{line:86,column:12},end:{line:90,column:13}},type:"if",locations:[{start:{line:86,column:12},end:{line:90,column:13}},{start:{line:86,column:12},end:{line:90,column:13}}],line:86},"5":{loc:{start:{line:86,column:16},end:{line:86,column:47}},type:"binary-expr",locations:[{start:{line:86,column:16},end:{line:86,column:21}},{start:{line:86,column:25},end:{line:86,column:47}}],line:86},"6":{loc:{start:{line:93,column:16},end:{line:97,column:17}},type:"if",locations:[{start:{line:93,column:16},end:{line:97,column:17}},{start:{line:93,column:16},end:{line:97,column:17}}],line:93},"7":{loc:{start:{line:135,column:8},end:{line:140,column:9}},type:"if",locations:[{start:{line:135,column:8},end:{line:140,column:9}},{start:{line:135,column:8},end:{line:140,column:9}}],line:135},"8":{loc:{start:{line:143,column:12},end:{line:147,column:13}},type:"if",locations:[{start:{line:143,column:12},end:{line:147,column:13}},{start:{line:143,column:12},end:{line:147,column:13}}],line:143},"9":{loc:{start:{line:143,column:16},end:{line:143,column:47}},type:"binary-expr",locations:[{start:{line:143,column:16},end:{line:143,column:21}},{start:{line:143,column:25},end:{line:143,column:47}}],line:143},"10":{loc:{start:{line:153,column:20},end:{line:157,column:21}},type:"if",locations:[{start:{line:153,column:20},end:{line:157,column:21}},{start:{line:153,column:20},end:{line:157,column:21}}],line:153},"11":{loc:{start:{line:159,column:20},end:{line:163,column:21}},type:"if",locations:[{start:{line:159,column:20},end:{line:163,column:21}},{start:{line:159,column:20},end:{line:163,column:21}}],line:159},"12":{loc:{start:{line:159,column:24},end:{line:159,column:83}},type:"binary-expr",locations:[{start:{line:159,column:24},end:{line:159,column:62}},{start:{line:159,column:66},end:{line:159,column:83}}],line:159},"13":{loc:{start:{line:187,column:12},end:{line:191,column:13}},type:"if",locations:[{start:{line:187,column:12},end:{line:191,column:13}},{start:{line:187,column:12},end:{line:191,column:13}}],line:187},"14":{loc:{start:{line:193,column:12},end:{line:197,column:13}},type:"if",locations:[{start:{line:193,column:12},end:{line:197,column:13}},{start:{line:193,column:12},end:{line:197,column:13}}],line:193},"15":{loc:{start:{line:193,column:16},end:{line:193,column:71}},type:"binary-expr",locations:[{start:{line:193,column:16},end:{line:193,column:50}},{start:{line:193,column:54},end:{line:193,column:71}}],line:193}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f24209fe4e0d54f0e9b78335a81c5d16e274bca9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_yhcw37bd3=function(){return actualCoverage;};}return actualCoverage;}cov_yhcw37bd3();const COMMENT=(cov_yhcw37bd3().s[0]++,require('mongoose').model('Comment'));const BOOK=(cov_yhcw37bd3().s[1]++,require('mongoose').model('Book'));const USER=(cov_yhcw37bd3().s[2]++,require('mongoose').model('User'));const PAGE_LIMIT=(cov_yhcw37bd3().s[3]++,5);function validateCommentForm(payload){cov_yhcw37bd3().f[0]++;let errors=(cov_yhcw37bd3().s[4]++,{});let isFormValid=(cov_yhcw37bd3().s[5]++,true);cov_yhcw37bd3().s[6]++;if((cov_yhcw37bd3().b[1][0]++,!payload)||(cov_yhcw37bd3().b[1][1]++,typeof payload.content!=='string')||(cov_yhcw37bd3().b[1][2]++,payload.content.trim().length<3)){cov_yhcw37bd3().b[0][0]++;cov_yhcw37bd3().s[7]++;isFormValid=false;cov_yhcw37bd3().s[8]++;errors.content='Comment must be more than 3 symbols long.';}else{cov_yhcw37bd3().b[0][1]++;}cov_yhcw37bd3().s[9]++;return{success:isFormValid,errors};}cov_yhcw37bd3().s[10]++;module.exports={getComments:(req,res)=>{cov_yhcw37bd3().f[1]++;let bookId=(cov_yhcw37bd3().s[11]++,req.params.bookId);let skipCount=(cov_yhcw37bd3().s[12]++,!isNaN(Number(req.params.skipCount))?(cov_yhcw37bd3().b[2][0]++,Number(req.params.skipCount)):(cov_yhcw37bd3().b[2][1]++,0));cov_yhcw37bd3().s[13]++;COMMENT.find({book:bookId}).populate({path:'user',select:'username avatar'}).sort({creationDate:-1}).skip(skipCount).limit(PAGE_LIMIT).then(comments=>{cov_yhcw37bd3().f[2]++;cov_yhcw37bd3().s[14]++;res.status(200).json({message:'',data:comments});}).catch(err=>{cov_yhcw37bd3().f[3]++;cov_yhcw37bd3().s[15]++;console.log(err);cov_yhcw37bd3().s[16]++;return res.status(400).json({message:'Something went wrong, please try again.'});});},getLatestFiveByUser:(req,res)=>{cov_yhcw37bd3().f[4]++;let userId=(cov_yhcw37bd3().s[17]++,req.params.userId);cov_yhcw37bd3().s[18]++;COMMENT.find({user:userId}).populate('book').sort({creationDate:-1}).limit(5).then(comments=>{cov_yhcw37bd3().f[5]++;cov_yhcw37bd3().s[19]++;res.status(200).json({message:'',data:comments});}).catch(err=>{cov_yhcw37bd3().f[6]++;cov_yhcw37bd3().s[20]++;console.log(err);cov_yhcw37bd3().s[21]++;return res.status(400).json({message:'Something went wrong, please try again.'});});},add:(req,res)=>{cov_yhcw37bd3().f[7]++;let bookId=(cov_yhcw37bd3().s[22]++,req.params.bookId);let userId=(cov_yhcw37bd3().s[23]++,req.user.id);let comment=(cov_yhcw37bd3().s[24]++,req.body.content);let validationResult=(cov_yhcw37bd3().s[25]++,validateCommentForm(req.body));cov_yhcw37bd3().s[26]++;if(!validationResult.success){cov_yhcw37bd3().b[3][0]++;cov_yhcw37bd3().s[27]++;return res.status(400).json({message:'Comment form validation failed!',errors:validationResult.errors});}else{cov_yhcw37bd3().b[3][1]++;}cov_yhcw37bd3().s[28]++;USER.findById(userId).then(user=>{cov_yhcw37bd3().f[8]++;cov_yhcw37bd3().s[29]++;if((cov_yhcw37bd3().b[5][0]++,!user)||(cov_yhcw37bd3().b[5][1]++,user.isCommentsBlocked)){cov_yhcw37bd3().b[4][0]++;cov_yhcw37bd3().s[30]++;return res.status(401).json({message:'Sorry, but you\'re not allowed to comment on books'});}else{cov_yhcw37bd3().b[4][1]++;}cov_yhcw37bd3().s[31]++;BOOK.findById(bookId).then(book=>{cov_yhcw37bd3().f[9]++;cov_yhcw37bd3().s[32]++;if(!book){cov_yhcw37bd3().b[6][0]++;cov_yhcw37bd3().s[33]++;return res.status(400).json({message:'There is no book with the given id in our database.'});}else{cov_yhcw37bd3().b[6][1]++;}cov_yhcw37bd3().s[34]++;COMMENT.create({content:comment}).then(newComment=>{cov_yhcw37bd3().f[10]++;cov_yhcw37bd3().s[35]++;book.comments.push(newComment._id);cov_yhcw37bd3().s[36]++;newComment.book=book._id;cov_yhcw37bd3().s[37]++;newComment.user=userId;cov_yhcw37bd3().s[38]++;user.commentsCount+=1;cov_yhcw37bd3().s[39]++;user.save();cov_yhcw37bd3().s[40]++;book.save();cov_yhcw37bd3().s[41]++;newComment.save().then(()=>{cov_yhcw37bd3().f[11]++;cov_yhcw37bd3().s[42]++;COMMENT.findById(newComment._id).populate({path:'user',select:'username avatar'}).then(comment=>{cov_yhcw37bd3().f[12]++;cov_yhcw37bd3().s[43]++;return res.status(200).json({message:'Comment posted successfully!',data:comment});});});}).catch(err=>{cov_yhcw37bd3().f[13]++;cov_yhcw37bd3().s[44]++;console.log(err);cov_yhcw37bd3().s[45]++;return res.status(400).json({message:'Something went wrong, please try again.'});});});});},edit:(req,res)=>{cov_yhcw37bd3().f[14]++;let commentId=(cov_yhcw37bd3().s[46]++,req.params.commentId);let userId=(cov_yhcw37bd3().s[47]++,req.user.id);let editedComment=(cov_yhcw37bd3().s[48]++,req.body.content);let validationResult=(cov_yhcw37bd3().s[49]++,validateCommentForm(req.body));cov_yhcw37bd3().s[50]++;if(!validationResult.success){cov_yhcw37bd3().b[7][0]++;cov_yhcw37bd3().s[51]++;return res.status(400).json({message:'Comment form validation failed!',errors:validationResult.errors});}else{cov_yhcw37bd3().b[7][1]++;}cov_yhcw37bd3().s[52]++;USER.findById(userId).then(user=>{cov_yhcw37bd3().f[15]++;cov_yhcw37bd3().s[53]++;if((cov_yhcw37bd3().b[9][0]++,!user)||(cov_yhcw37bd3().b[9][1]++,user.isCommentsBlocked)){cov_yhcw37bd3().b[8][0]++;cov_yhcw37bd3().s[54]++;return res.status(401).json({message:'Sorry, but you\'re not allowed to comment on books'});}else{cov_yhcw37bd3().b[8][1]++;}cov_yhcw37bd3().s[55]++;COMMENT.findById(commentId).populate({path:'user',select:'username avatar'}).then(comment=>{cov_yhcw37bd3().f[16]++;cov_yhcw37bd3().s[56]++;if(!comment){cov_yhcw37bd3().b[10][0]++;cov_yhcw37bd3().s[57]++;return res.status(400).json({message:'There is no comment with the given id in our database.'});}else{cov_yhcw37bd3().b[10][1]++;}cov_yhcw37bd3().s[58]++;if((cov_yhcw37bd3().b[12][0]++,comment.user._id.toString()!==userId)&&(cov_yhcw37bd3().b[12][1]++,!req.user.isAdmin)){cov_yhcw37bd3().b[11][0]++;cov_yhcw37bd3().s[59]++;return res.status(401).json({message:'You\'re not allowed to edit other user comments!'});}else{cov_yhcw37bd3().b[11][1]++;}cov_yhcw37bd3().s[60]++;comment.content=editedComment;cov_yhcw37bd3().s[61]++;comment.save();cov_yhcw37bd3().s[62]++;return res.status(200).json({message:'Comment edited successfully!',data:comment});}).catch(err=>{cov_yhcw37bd3().f[17]++;cov_yhcw37bd3().s[63]++;console.log(err);cov_yhcw37bd3().s[64]++;return res.status(400).json({message:'Something went wrong, please try again.'});});});},delete:(req,res)=>{cov_yhcw37bd3().f[18]++;let commentId=(cov_yhcw37bd3().s[65]++,req.params.commentId);let userId=(cov_yhcw37bd3().s[66]++,req.user.id);cov_yhcw37bd3().s[67]++;COMMENT.findById(commentId).then(comment=>{cov_yhcw37bd3().f[19]++;cov_yhcw37bd3().s[68]++;if(!comment){cov_yhcw37bd3().b[13][0]++;cov_yhcw37bd3().s[69]++;return res.status(400).json({message:'There is no comment with the given id in our database.'});}else{cov_yhcw37bd3().b[13][1]++;}cov_yhcw37bd3().s[70]++;if((cov_yhcw37bd3().b[15][0]++,comment.user.toString()!==userId)&&(cov_yhcw37bd3().b[15][1]++,!req.user.isAdmin)){cov_yhcw37bd3().b[14][0]++;cov_yhcw37bd3().s[71]++;return res.status(401).json({message:'You\'re not allowed to delete other user comments!'});}else{cov_yhcw37bd3().b[14][1]++;}cov_yhcw37bd3().s[72]++;COMMENT.findByIdAndRemove(comment._id).then(()=>{cov_yhcw37bd3().f[20]++;cov_yhcw37bd3().s[73]++;BOOK.update({_id:comment.book},{$pull:{comments:comment._id}}).then(()=>{cov_yhcw37bd3().f[21]++;cov_yhcw37bd3().s[74]++;USER.findById(req.user.id).then(user=>{cov_yhcw37bd3().f[22]++;cov_yhcw37bd3().s[75]++;user.commentsCount-=1;cov_yhcw37bd3().s[76]++;user.save();cov_yhcw37bd3().s[77]++;return res.status(200).json({message:'Comment deleted successfully!'});});});});}).catch(err=>{cov_yhcw37bd3().f[23]++;cov_yhcw37bd3().s[78]++;console.log(err);cov_yhcw37bd3().s[79]++;return res.status(400).json({message:'Something went wrong, please try again.'});});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDT01NRU5UIiwicmVxdWlyZSIsIm1vZGVsIiwiQk9PSyIsIlVTRVIiLCJQQUdFX0xJTUlUIiwidmFsaWRhdGVDb21tZW50Rm9ybSIsInBheWxvYWQiLCJlcnJvcnMiLCJpc0Zvcm1WYWxpZCIsImNvbnRlbnQiLCJ0cmltIiwibGVuZ3RoIiwic3VjY2VzcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJnZXRDb21tZW50cyIsInJlcSIsInJlcyIsImJvb2tJZCIsInBhcmFtcyIsInNraXBDb3VudCIsImlzTmFOIiwiTnVtYmVyIiwiZmluZCIsImJvb2siLCJwb3B1bGF0ZSIsInBhdGgiLCJzZWxlY3QiLCJzb3J0IiwiY3JlYXRpb25EYXRlIiwic2tpcCIsImxpbWl0IiwidGhlbiIsImNvbW1lbnRzIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJkYXRhIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0TGF0ZXN0Rml2ZUJ5VXNlciIsInVzZXJJZCIsInVzZXIiLCJhZGQiLCJpZCIsImNvbW1lbnQiLCJib2R5IiwidmFsaWRhdGlvblJlc3VsdCIsImZpbmRCeUlkIiwiaXNDb21tZW50c0Jsb2NrZWQiLCJjcmVhdGUiLCJuZXdDb21tZW50IiwicHVzaCIsIl9pZCIsImNvbW1lbnRzQ291bnQiLCJzYXZlIiwiZWRpdCIsImNvbW1lbnRJZCIsImVkaXRlZENvbW1lbnQiLCJ0b1N0cmluZyIsImlzQWRtaW4iLCJkZWxldGUiLCJmaW5kQnlJZEFuZFJlbW92ZSIsInVwZGF0ZSIsIiRwdWxsIl0sInNvdXJjZXMiOlsiY29tbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDT01NRU5UID0gcmVxdWlyZSgnbW9uZ29vc2UnKS5tb2RlbCgnQ29tbWVudCcpO1xyXG5jb25zdCBCT09LID0gcmVxdWlyZSgnbW9uZ29vc2UnKS5tb2RlbCgnQm9vaycpO1xyXG5jb25zdCBVU0VSID0gcmVxdWlyZSgnbW9uZ29vc2UnKS5tb2RlbCgnVXNlcicpO1xyXG5cclxuY29uc3QgUEFHRV9MSU1JVCA9IDU7XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbW1lbnRGb3JtKHBheWxvYWQpIHtcclxuICAgIGxldCBlcnJvcnMgPSB7fTtcclxuICAgIGxldCBpc0Zvcm1WYWxpZCA9IHRydWU7XHJcblxyXG4gICAgaWYgKCFwYXlsb2FkIHx8IHR5cGVvZiBwYXlsb2FkLmNvbnRlbnQgIT09ICdzdHJpbmcnIHx8IHBheWxvYWQuY29udGVudC50cmltKCkubGVuZ3RoIDwgMykge1xyXG4gICAgICAgIGlzRm9ybVZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgZXJyb3JzLmNvbnRlbnQgPSAnQ29tbWVudCBtdXN0IGJlIG1vcmUgdGhhbiAzIHN5bWJvbHMgbG9uZy4nO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogaXNGb3JtVmFsaWQsXHJcbiAgICAgICAgZXJyb3JzXHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGdldENvbW1lbnRzOiAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBsZXQgYm9va0lkID0gcmVxLnBhcmFtcy5ib29rSWQ7XHJcbiAgICAgICAgbGV0IHNraXBDb3VudCA9ICFpc05hTihOdW1iZXIocmVxLnBhcmFtcy5za2lwQ291bnQpKVxyXG4gICAgICAgICAgICA/IE51bWJlcihyZXEucGFyYW1zLnNraXBDb3VudClcclxuICAgICAgICAgICAgOiAwO1xyXG5cclxuICAgICAgICBDT01NRU5UXHJcbiAgICAgICAgICAgIC5maW5kKHsgYm9vazogYm9va0lkIH0pXHJcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7IHBhdGg6ICd1c2VyJywgc2VsZWN0OiAndXNlcm5hbWUgYXZhdGFyJyB9KVxyXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0aW9uRGF0ZTogLTEgfSlcclxuICAgICAgICAgICAgLnNraXAoc2tpcENvdW50KVxyXG4gICAgICAgICAgICAubGltaXQoUEFHRV9MSU1JVClcclxuICAgICAgICAgICAgLnRoZW4oKGNvbW1lbnRzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY29tbWVudHNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TGF0ZXN0Rml2ZUJ5VXNlcjogKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgbGV0IHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkO1xyXG5cclxuICAgICAgICBDT01NRU5UXHJcbiAgICAgICAgICAgIC5maW5kKHsgdXNlcjogdXNlcklkIH0pXHJcbiAgICAgICAgICAgIC5wb3B1bGF0ZSgnYm9vaycpXHJcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRpb25EYXRlOiAtMSB9KVxyXG4gICAgICAgICAgICAubGltaXQoNSlcclxuICAgICAgICAgICAgLnRoZW4oKGNvbW1lbnRzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY29tbWVudHNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkOiAocmVxLCByZXMpID0+IHtcclxuICAgICAgICBsZXQgYm9va0lkID0gcmVxLnBhcmFtcy5ib29rSWQ7XHJcbiAgICAgICAgbGV0IHVzZXJJZCA9IHJlcS51c2VyLmlkO1xyXG4gICAgICAgIGxldCBjb21tZW50ID0gcmVxLmJvZHkuY29udGVudDtcclxuXHJcbiAgICAgICAgbGV0IHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZUNvbW1lbnRGb3JtKHJlcS5ib2R5KTtcclxuXHJcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb21tZW50IGZvcm0gdmFsaWRhdGlvbiBmYWlsZWQhJyxcclxuICAgICAgICAgICAgICAgIGVycm9yczogdmFsaWRhdGlvblJlc3VsdC5lcnJvcnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBVU0VSLmZpbmRCeUlkKHVzZXJJZCkudGhlbigodXNlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXVzZXIgfHwgdXNlci5pc0NvbW1lbnRzQmxvY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU29ycnksIGJ1dCB5b3VcXCdyZSBub3QgYWxsb3dlZCB0byBjb21tZW50IG9uIGJvb2tzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJPT0suZmluZEJ5SWQoYm9va0lkKS50aGVuKChib29rKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJvb2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgbm8gYm9vayB3aXRoIHRoZSBnaXZlbiBpZCBpbiBvdXIgZGF0YWJhc2UuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIENPTU1FTlQuY3JlYXRlKHsgY29udGVudDogY29tbWVudCB9KS50aGVuKChuZXdDb21tZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9vay5jb21tZW50cy5wdXNoKG5ld0NvbW1lbnQuX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdDb21tZW50LmJvb2sgPSBib29rLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICBuZXdDb21tZW50LnVzZXIgPSB1c2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlci5jb21tZW50c0NvdW50ICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXIuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbW1lbnQuc2F2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDT01NRU5UXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZEJ5SWQobmV3Q29tbWVudC5faWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9wdWxhdGUoeyBwYXRoOiAndXNlcicsIHNlbGVjdDogJ3VzZXJuYW1lIGF2YXRhcicgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChjb21tZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvbW1lbnQgcG9zdGVkIHN1Y2Nlc3NmdWxseSEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb21tZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2Fpbi4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVkaXQ6IChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGxldCBjb21tZW50SWQgPSByZXEucGFyYW1zLmNvbW1lbnRJZDtcclxuICAgICAgICBsZXQgdXNlcklkID0gcmVxLnVzZXIuaWQ7XHJcbiAgICAgICAgbGV0IGVkaXRlZENvbW1lbnQgPSByZXEuYm9keS5jb250ZW50O1xyXG5cclxuICAgICAgICBsZXQgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlQ29tbWVudEZvcm0ocmVxLmJvZHkpO1xyXG5cclxuICAgICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvbW1lbnQgZm9ybSB2YWxpZGF0aW9uIGZhaWxlZCEnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFVTRVIuZmluZEJ5SWQodXNlcklkKS50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlciB8fCB1c2VyLmlzQ29tbWVudHNCbG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTb3JyeSwgYnV0IHlvdVxcJ3JlIG5vdCBhbGxvd2VkIHRvIGNvbW1lbnQgb24gYm9va3MnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ09NTUVOVFxyXG4gICAgICAgICAgICAgICAgLmZpbmRCeUlkKGNvbW1lbnRJZClcclxuICAgICAgICAgICAgICAgIC5wb3B1bGF0ZSh7IHBhdGg6ICd1c2VyJywgc2VsZWN0OiAndXNlcm5hbWUgYXZhdGFyJyB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvbW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBubyBjb21tZW50IHdpdGggdGhlIGdpdmVuIGlkIGluIG91ciBkYXRhYmFzZS4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQudXNlci5faWQudG9TdHJpbmcoKSAhPT0gdXNlcklkICYmICFyZXEudXNlci5pc0FkbWluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91XFwncmUgbm90IGFsbG93ZWQgdG8gZWRpdCBvdGhlciB1c2VyIGNvbW1lbnRzISdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb21tZW50LmNvbnRlbnQgPSBlZGl0ZWRDb21tZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnQuc2F2ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29tbWVudCBlZGl0ZWQgc3VjY2Vzc2Z1bGx5IScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvbW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLidcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBkZWxldGU6IChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGxldCBjb21tZW50SWQgPSByZXEucGFyYW1zLmNvbW1lbnRJZDtcclxuICAgICAgICBsZXQgdXNlcklkID0gcmVxLnVzZXIuaWQ7XHJcblxyXG4gICAgICAgIENPTU1FTlQuZmluZEJ5SWQoY29tbWVudElkKS50aGVuKChjb21tZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY29tbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgbm8gY29tbWVudCB3aXRoIHRoZSBnaXZlbiBpZCBpbiBvdXIgZGF0YWJhc2UuJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb21tZW50LnVzZXIudG9TdHJpbmcoKSAhPT0gdXNlcklkICYmICFyZXEudXNlci5pc0FkbWluKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3VcXCdyZSBub3QgYWxsb3dlZCB0byBkZWxldGUgb3RoZXIgdXNlciBjb21tZW50cyEnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ09NTUVOVC5maW5kQnlJZEFuZFJlbW92ZShjb21tZW50Ll9pZCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBCT09LLnVwZGF0ZSh7IF9pZDogY29tbWVudC5ib29rIH0sIHsgJHB1bGw6IHsgY29tbWVudHM6IGNvbW1lbnQuX2lkIH0gfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVNFUi5maW5kQnlJZChyZXEudXNlci5pZCkudGhlbigodXNlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyLmNvbW1lbnRzQ291bnQgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29tbWVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseSEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2Fpbi4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyJdLCJtYXBwaW5ncyI6Iml1WkFlWTtBQUFBLHlGQWZaLEtBQU1BLFFBQU8seUJBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUNwRCxLQUFNQyxLQUFJLHlCQUFHRixPQUFPLENBQUMsVUFBVSxDQUFDLENBQUNDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFDOUMsS0FBTUUsS0FBSSx5QkFBR0gsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDQyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBRTlDLEtBQU1HLFdBQVUs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